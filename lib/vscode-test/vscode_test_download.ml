[@@@js.dummy "!! This code has been generated by gen_js_api !!"]
[@@@ocaml.warning "-7-32-39"]
[@@@ocaml.warning "-7-11-32-33-39"]
open Es5
module AnonymousInterface0 =
  struct
    type t = Ojs.t
    let rec t_of_js : Ojs.t -> t = fun (x2 : Ojs.t) -> x2
    and t_to_js : t -> Ojs.t = fun (x1 : Ojs.t) -> x1
  end
module StringLiteralUnion =
  struct
    type ('T, 'U) t = 'T
    let rec t_of_js :
      'T 'U . (Ojs.t -> 'T) -> (Ojs.t -> 'U) -> Ojs.t -> ('T, 'U) t = fun
      (type __T) -> fun (type __U) ->
      fun (__T_of_js : Ojs.t -> __T) ->
        fun (__U_of_js : Ojs.t -> __U) -> fun (x4 : Ojs.t) -> __T_of_js x4
    and t_to_js :
      'T 'U . ('T -> Ojs.t) -> ('U -> Ojs.t) -> ('T, 'U) t -> Ojs.t = fun
      (type __T) -> fun (type __U) ->
      fun (__T_to_js : __T -> Ojs.t) ->
        fun (__U_to_js : __U -> Ojs.t) -> fun (x3 : __T) -> __T_to_js x3
  end
module DownloadVersion =
  struct
    type t =
      ([ `L_s1_insiders  | `L_s3_stable ], string) StringLiteralUnion.t
    let rec t_of_js : Ojs.t -> t =
      fun (x8 : Ojs.t) ->
        StringLiteralUnion.t_of_js
          (fun (x9 : Ojs.t) ->
             let x10 = x9 in
             match Ojs.string_of_js x10 with
             | "insiders" -> `L_s1_insiders
             | "stable" -> `L_s3_stable
             | _ -> assert false) Ojs.string_of_js x8
    and t_to_js : t -> Ojs.t =
      fun
        (x5 :
          ([ `L_s1_insiders  | `L_s3_stable ], string) StringLiteralUnion.t)
        ->
        StringLiteralUnion.t_to_js
          (fun (x6 : [ `L_s1_insiders  | `L_s3_stable ]) ->
             match x6 with
             | `L_s1_insiders -> Ojs.string_to_js "insiders"
             | `L_s3_stable -> Ojs.string_to_js "stable") Ojs.string_to_js x5
  end
module DownloadPlatform =
  struct
    type t =
      ([ `L_s0_darwin  | `L_s2_linux_x64  | `L_s4_win32_archive 
       | `L_s5_win32_x64_archive ], string) StringLiteralUnion.t
    let rec t_of_js : Ojs.t -> t =
      fun (x15 : Ojs.t) ->
        StringLiteralUnion.t_of_js
          (fun (x16 : Ojs.t) ->
             let x17 = x16 in
             match Ojs.string_of_js x17 with
             | "darwin" -> `L_s0_darwin
             | "linux-x64" -> `L_s2_linux_x64
             | "win32-archive" -> `L_s4_win32_archive
             | "win32-x64-archive" -> `L_s5_win32_x64_archive
             | _ -> assert false) Ojs.string_of_js x15
    and t_to_js : t -> Ojs.t =
      fun
        (x12 :
          ([ `L_s0_darwin  | `L_s2_linux_x64  | `L_s4_win32_archive 
           | `L_s5_win32_x64_archive ], string) StringLiteralUnion.t)
        ->
        StringLiteralUnion.t_to_js
          (fun
             (x13 :
               [ `L_s0_darwin  | `L_s2_linux_x64  | `L_s4_win32_archive 
               | `L_s5_win32_x64_archive ])
             ->
             match x13 with
             | `L_s0_darwin -> Ojs.string_to_js "darwin"
             | `L_s2_linux_x64 -> Ojs.string_to_js "linux-x64"
             | `L_s4_win32_archive -> Ojs.string_to_js "win32-archive"
             | `L_s5_win32_x64_archive ->
                 Ojs.string_to_js "win32-x64-archive") Ojs.string_to_js x12
  end
let (download_and_unzip_vs_code :
  ?version:DownloadVersion.t ->
    ?platform:DownloadPlatform.t -> unit -> string Promise.t)
  =
  fun ?version:(x19 : DownloadVersion.t option) ->
    fun ?platform:(x20 : DownloadPlatform.t option) ->
      fun () ->
        Promise.t_of_js Ojs.string_of_js
          (let x24 = Ojs.global in
           Ojs.call (Ojs.get_prop_ascii x24 "downloadAndUnzipVSCode") "apply"
             [|x24;((let x21 =
                       Ojs.new_obj (Ojs.get_prop_ascii Ojs.global "Array")
                         [||] in
                     (match x19 with
                      | Some x23 ->
                          ignore
                            (Ojs.call x21 "push"
                               [|(DownloadVersion.t_to_js x23)|])
                      | None -> ());
                     (match x20 with
                      | Some x22 ->
                          ignore
                            (Ojs.call x21 "push"
                               [|(DownloadPlatform.t_to_js x22)|])
                      | None -> ());
                     x21))|])
