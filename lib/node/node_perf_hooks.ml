[@@@js.dummy "!! This code has been generated by gen_js_api !!"]
[@@@ocaml.warning "-7-32-39"]
[@@@ocaml.warning "-7-11-32-33-39"]
open Es2020
open Node_globals
module Perf_hooks =
  struct
    module EntryType =
      struct
        type t =
          [ `function_  | `gc  | `http  | `http2  | `mark  | `measure 
          | `node ]
        let rec t_of_js : Ojs.t -> t =
          fun (x2 : Ojs.t) ->
            let x3 = x2 in
            match Ojs.string_of_js x3 with
            | "function" -> `function_
            | "gc" -> `gc
            | "http" -> `http
            | "http2" -> `http2
            | "mark" -> `mark
            | "measure" -> `measure
            | "node" -> `node
            | _ -> assert false
        and t_to_js : t -> Ojs.t =
          fun
            (x1 :
              [ `function_  | `gc  | `http  | `http2  | `mark  | `measure 
              | `node ])
            ->
            match x1 with
            | `function_ -> Ojs.string_to_js "function"
            | `gc -> Ojs.string_to_js "gc"
            | `http -> Ojs.string_to_js "http"
            | `http2 -> Ojs.string_to_js "http2"
            | `mark -> Ojs.string_to_js "mark"
            | `measure -> Ojs.string_to_js "measure"
            | `node -> Ojs.string_to_js "node"
      end
    module AnonymousInterface0 =
      struct
        type t = Ojs.t
        let rec t_of_js : Ojs.t -> t = fun (x5 : Ojs.t) -> x5
        and t_to_js : t -> Ojs.t = fun (x4 : Ojs.t) -> x4
        let (get_entry_types : t -> EntryType.t list) =
          fun (x6 : t) ->
            Ojs.list_of_js EntryType.t_of_js
              (Ojs.get_prop_ascii (t_to_js x6) "entryTypes")
        let (set_entry_types : t -> EntryType.t list -> unit) =
          fun (x8 : t) ->
            fun (x9 : EntryType.t list) ->
              Ojs.set_prop_ascii (t_to_js x8) "entryTypes"
                (Ojs.list_to_js EntryType.t_to_js x9)
        let (get_buffered : t -> bool) =
          fun (x11 : t) ->
            Ojs.bool_of_js (Ojs.get_prop_ascii (t_to_js x11) "buffered")
        let (set_buffered : t -> bool -> unit) =
          fun (x12 : t) ->
            fun (x13 : bool) ->
              Ojs.set_prop_ascii (t_to_js x12) "buffered"
                (Ojs.bool_to_js x13)
      end
    module PerformanceEntry =
      struct
        type t = Ojs.t
        let rec t_of_js : Ojs.t -> t = fun (x15 : Ojs.t) -> x15
        and t_to_js : t -> Ojs.t = fun (x14 : Ojs.t) -> x14
        let (get_duration : t -> int) =
          fun (x16 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x16) "duration")
        let (get_name : t -> string) =
          fun (x17 : t) ->
            Ojs.string_of_js (Ojs.get_prop_ascii (t_to_js x17) "name")
        let (get_start_time : t -> int) =
          fun (x18 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x18) "startTime")
        let (get_entry_type : t -> EntryType.t) =
          fun (x19 : t) ->
            EntryType.t_of_js (Ojs.get_prop_ascii (t_to_js x19) "entryType")
        let (get_kind : t -> int) =
          fun (x20 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x20) "kind")
        let (get_flags : t -> int) =
          fun (x21 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x21) "flags")
      end
    module PerformanceNodeTiming =
      struct
        include struct include PerformanceEntry end
        let (get_bootstrap_complete : t -> int) =
          fun (x22 : t) ->
            Ojs.int_of_js
              (Ojs.get_prop_ascii (t_to_js x22) "bootstrapComplete")
        let (get_environment : t -> int) =
          fun (x23 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x23) "environment")
        let (get_idle_time : t -> int) =
          fun (x24 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x24) "idleTime")
        let (get_loop_exit : t -> int) =
          fun (x25 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x25) "loopExit")
        let (get_loop_start : t -> int) =
          fun (x26 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x26) "loopStart")
        let (get_v8Start : t -> int) =
          fun (x27 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x27) "v8Start")
      end
    module EventLoopUtilization =
      struct
        type t = Ojs.t
        let rec t_of_js : Ojs.t -> t = fun (x29 : Ojs.t) -> x29
        and t_to_js : t -> Ojs.t = fun (x28 : Ojs.t) -> x28
        let (get_idle : t -> int) =
          fun (x30 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x30) "idle")
        let (set_idle : t -> int -> unit) =
          fun (x31 : t) ->
            fun (x32 : int) ->
              Ojs.set_prop_ascii (t_to_js x31) "idle" (Ojs.int_to_js x32)
        let (get_active : t -> int) =
          fun (x33 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x33) "active")
        let (set_active : t -> int -> unit) =
          fun (x34 : t) ->
            fun (x35 : int) ->
              Ojs.set_prop_ascii (t_to_js x34) "active" (Ojs.int_to_js x35)
        let (get_utilization : t -> int) =
          fun (x36 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x36) "utilization")
        let (set_utilization : t -> int -> unit) =
          fun (x37 : t) ->
            fun (x38 : int) ->
              Ojs.set_prop_ascii (t_to_js x37) "utilization"
                (Ojs.int_to_js x38)
      end
    module Performance =
      struct
        type t = Ojs.t
        let rec t_of_js : Ojs.t -> t = fun (x40 : Ojs.t) -> x40
        and t_to_js : t -> Ojs.t = fun (x39 : Ojs.t) -> x39
        let (clear_marks : t -> ?name:string -> unit -> unit) =
          fun (x44 : t) ->
            fun ?name:(x41 : string option) ->
              fun () ->
                ignore
                  (let x45 = t_to_js x44 in
                   Ojs.call (Ojs.get_prop_ascii x45 "clearMarks") "apply"
                     [|x45;((let x42 =
                               Ojs.new_obj
                                 (Ojs.get_prop_ascii Ojs.global "Array") 
                                 [||] in
                             (match x41 with
                              | Some x43 ->
                                  ignore
                                    (Ojs.call x42 "push"
                                       [|(Ojs.string_to_js x43)|])
                              | None -> ());
                             x42))|])
        let (mark : t -> ?name:string -> unit -> unit) =
          fun (x49 : t) ->
            fun ?name:(x46 : string option) ->
              fun () ->
                ignore
                  (let x50 = t_to_js x49 in
                   Ojs.call (Ojs.get_prop_ascii x50 "mark") "apply"
                     [|x50;((let x47 =
                               Ojs.new_obj
                                 (Ojs.get_prop_ascii Ojs.global "Array") 
                                 [||] in
                             (match x46 with
                              | Some x48 ->
                                  ignore
                                    (Ojs.call x47 "push"
                                       [|(Ojs.string_to_js x48)|])
                              | None -> ());
                             x47))|])
        let (measure :
          t -> name:string -> start_mark:string -> end_mark:string -> unit) =
          fun (x54 : t) ->
            fun ~name:(x51 : string) ->
              fun ~start_mark:(x52 : string) ->
                fun ~end_mark:(x53 : string) ->
                  ignore
                    (Ojs.call (t_to_js x54) "measure"
                       [|(Ojs.string_to_js x51);(Ojs.string_to_js x52);(
                         Ojs.string_to_js x53)|])
        let (get_node_timing : t -> PerformanceNodeTiming.t) =
          fun (x55 : t) ->
            PerformanceNodeTiming.t_of_js
              (Ojs.get_prop_ascii (t_to_js x55) "nodeTiming")
        let (now : t -> int) =
          fun (x56 : t) -> Ojs.int_of_js (Ojs.call (t_to_js x56) "now" [||])
        let (get_time_origin : t -> int) =
          fun (x57 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x57) "timeOrigin")
        let (timerify : t -> fn:'T -> 'T) =
          fun (x59 : t) ->
            fun ~fn:(x58 : 'T) ->
              Obj.magic
                (Ojs.call (t_to_js x59) "timerify" [|(Obj.magic x58)|])
        let (event_loop_utilization :
          t ->
            ?util1:EventLoopUtilization.t ->
              ?util2:EventLoopUtilization.t -> unit -> EventLoopUtilization.t)
          =
          fun (x65 : t) ->
            fun ?util1:(x60 : EventLoopUtilization.t option) ->
              fun ?util2:(x61 : EventLoopUtilization.t option) ->
                fun () ->
                  EventLoopUtilization.t_of_js
                    (let x66 = t_to_js x65 in
                     Ojs.call (Ojs.get_prop_ascii x66 "eventLoopUtilization")
                       "apply"
                       [|x66;((let x62 =
                                 Ojs.new_obj
                                   (Ojs.get_prop_ascii Ojs.global "Array")
                                   [||] in
                               (match x60 with
                                | Some x64 ->
                                    ignore
                                      (Ojs.call x62 "push"
                                         [|(EventLoopUtilization.t_to_js x64)|])
                                | None -> ());
                               (match x61 with
                                | Some x63 ->
                                    ignore
                                      (Ojs.call x62 "push"
                                         [|(EventLoopUtilization.t_to_js x63)|])
                                | None -> ());
                               x62))|])
      end
    module PerformanceObserverEntryList =
      struct
        type t = Ojs.t
        let rec t_of_js : Ojs.t -> t = fun (x68 : Ojs.t) -> x68
        and t_to_js : t -> Ojs.t = fun (x67 : Ojs.t) -> x67
        let (get_entries : t -> PerformanceEntry.t list) =
          fun (x69 : t) ->
            Ojs.list_of_js PerformanceEntry.t_of_js
              (Ojs.call (t_to_js x69) "getEntries" [||])
        let (get_entries_by_name :
          t ->
            name:string ->
              ?type_:EntryType.t -> unit -> PerformanceEntry.t list)
          =
          fun (x75 : t) ->
            fun ~name:(x71 : string) ->
              fun ?type_:(x72 : EntryType.t option) ->
                fun () ->
                  Ojs.list_of_js PerformanceEntry.t_of_js
                    (let x76 = t_to_js x75 in
                     Ojs.call (Ojs.get_prop_ascii x76 "getEntriesByName")
                       "apply"
                       [|x76;((let x73 =
                                 Ojs.new_obj
                                   (Ojs.get_prop_ascii Ojs.global "Array")
                                   [||] in
                               ignore
                                 (Ojs.call x73 "push"
                                    [|(Ojs.string_to_js x71)|]);
                               (match x72 with
                                | Some x74 ->
                                    ignore
                                      (Ojs.call x73 "push"
                                         [|(EntryType.t_to_js x74)|])
                                | None -> ());
                               x73))|])
        let (get_entries_by_type :
          t -> type_:EntryType.t -> PerformanceEntry.t list) =
          fun (x79 : t) ->
            fun ~type_:(x78 : EntryType.t) ->
              Ojs.list_of_js PerformanceEntry.t_of_js
                (Ojs.call (t_to_js x79) "getEntriesByType"
                   [|(EntryType.t_to_js x78)|])
      end
    module PerformanceObserverCallback =
      struct
        type t = Ojs.t
        let rec t_of_js : Ojs.t -> t = fun (x82 : Ojs.t) -> x82
        and t_to_js : t -> Ojs.t = fun (x81 : Ojs.t) -> x81
      end
    module PerformanceObserver =
      struct
        include struct include Node_async_hooks.Async_hooks.AsyncResource end
        let (create : callback:PerformanceObserverCallback.t -> t) =
          fun ~callback:(x83 : PerformanceObserverCallback.t) ->
            t_of_js
              (Ojs.new_obj
                 (Ojs.get_prop_ascii Import.perf_hooks "PerformanceObserver")
                 [|(PerformanceObserverCallback.t_to_js x83)|])
        let (disconnect : t -> unit) =
          fun (x84 : t) -> ignore (Ojs.call (t_to_js x84) "disconnect" [||])
        let (observe : t -> options:AnonymousInterface0.t -> unit) =
          fun (x86 : t) ->
            fun ~options:(x85 : AnonymousInterface0.t) ->
              ignore
                (Ojs.call (t_to_js x86) "observe"
                   [|(AnonymousInterface0.t_to_js x85)|])
      end
    module Constants =
      struct
        let (node_performance_gc_major : int) =
          Ojs.int_of_js
            (Ojs.get_prop_ascii
               (Ojs.get_prop_ascii Import.perf_hooks "constants")
               "NODE_PERFORMANCE_GC_MAJOR")
        let (node_performance_gc_minor : int) =
          Ojs.int_of_js
            (Ojs.get_prop_ascii
               (Ojs.get_prop_ascii Import.perf_hooks "constants")
               "NODE_PERFORMANCE_GC_MINOR")
        let (node_performance_gc_incremental : int) =
          Ojs.int_of_js
            (Ojs.get_prop_ascii
               (Ojs.get_prop_ascii Import.perf_hooks "constants")
               "NODE_PERFORMANCE_GC_INCREMENTAL")
        let (node_performance_gc_weakcb : int) =
          Ojs.int_of_js
            (Ojs.get_prop_ascii
               (Ojs.get_prop_ascii Import.perf_hooks "constants")
               "NODE_PERFORMANCE_GC_WEAKCB")
        let (node_performance_gc_flags_no : int) =
          Ojs.int_of_js
            (Ojs.get_prop_ascii
               (Ojs.get_prop_ascii Import.perf_hooks "constants")
               "NODE_PERFORMANCE_GC_FLAGS_NO")
        let (node_performance_gc_flags_construct_retained : int) =
          Ojs.int_of_js
            (Ojs.get_prop_ascii
               (Ojs.get_prop_ascii Import.perf_hooks "constants")
               "NODE_PERFORMANCE_GC_FLAGS_CONSTRUCT_RETAINED")
        let (node_performance_gc_flags_forced : int) =
          Ojs.int_of_js
            (Ojs.get_prop_ascii
               (Ojs.get_prop_ascii Import.perf_hooks "constants")
               "NODE_PERFORMANCE_GC_FLAGS_FORCED")
        let (node_performance_gc_flags_synchronous_phantom_processing : 
          int) =
          Ojs.int_of_js
            (Ojs.get_prop_ascii
               (Ojs.get_prop_ascii Import.perf_hooks "constants")
               "NODE_PERFORMANCE_GC_FLAGS_SYNCHRONOUS_PHANTOM_PROCESSING")
        let (node_performance_gc_flags_all_available_garbage : int) =
          Ojs.int_of_js
            (Ojs.get_prop_ascii
               (Ojs.get_prop_ascii Import.perf_hooks "constants")
               "NODE_PERFORMANCE_GC_FLAGS_ALL_AVAILABLE_GARBAGE")
        let (node_performance_gc_flags_all_external_memory : int) =
          Ojs.int_of_js
            (Ojs.get_prop_ascii
               (Ojs.get_prop_ascii Import.perf_hooks "constants")
               "NODE_PERFORMANCE_GC_FLAGS_ALL_EXTERNAL_MEMORY")
        let (node_performance_gc_flags_schedule_idle : int) =
          Ojs.int_of_js
            (Ojs.get_prop_ascii
               (Ojs.get_prop_ascii Import.perf_hooks "constants")
               "NODE_PERFORMANCE_GC_FLAGS_SCHEDULE_IDLE")
      end
    let (performance : Performance.t) =
      Performance.t_of_js
        (Ojs.get_prop_ascii Import.perf_hooks "performance")
    module EventLoopMonitorOptions =
      struct
        type t = Ojs.t
        let rec t_of_js : Ojs.t -> t = fun (x88 : Ojs.t) -> x88
        and t_to_js : t -> Ojs.t = fun (x87 : Ojs.t) -> x87
        let (get_resolution : t -> int) =
          fun (x89 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x89) "resolution")
        let (set_resolution : t -> int -> unit) =
          fun (x90 : t) ->
            fun (x91 : int) ->
              Ojs.set_prop_ascii (t_to_js x90) "resolution"
                (Ojs.int_to_js x91)
      end
    module EventLoopDelayMonitor =
      struct
        type t = Ojs.t
        let rec t_of_js : Ojs.t -> t = fun (x93 : Ojs.t) -> x93
        and t_to_js : t -> Ojs.t = fun (x92 : Ojs.t) -> x92
        let (enable : t -> bool) =
          fun (x94 : t) ->
            Ojs.bool_of_js (Ojs.call (t_to_js x94) "enable" [||])
        let (disable : t -> bool) =
          fun (x95 : t) ->
            Ojs.bool_of_js (Ojs.call (t_to_js x95) "disable" [||])
        let (reset : t -> unit) =
          fun (x96 : t) -> ignore (Ojs.call (t_to_js x96) "reset" [||])
        let (percentile : t -> percentile:int -> int) =
          fun (x98 : t) ->
            fun ~percentile:(x97 : int) ->
              Ojs.int_of_js
                (Ojs.call (t_to_js x98) "percentile" [|(Ojs.int_to_js x97)|])
        let (get_percentiles : t -> (int, int) Map.t) =
          fun (x99 : t) ->
            Map.t_of_js Ojs.int_of_js Ojs.int_of_js
              (Ojs.get_prop_ascii (t_to_js x99) "percentiles")
        let (get_exceeds : t -> int) =
          fun (x102 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x102) "exceeds")
        let (get_min : t -> int) =
          fun (x103 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x103) "min")
        let (get_max : t -> int) =
          fun (x104 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x104) "max")
        let (get_mean : t -> int) =
          fun (x105 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x105) "mean")
        let (get_stddev : t -> int) =
          fun (x106 : t) ->
            Ojs.int_of_js (Ojs.get_prop_ascii (t_to_js x106) "stddev")
      end
    let (monitor_event_loop_delay :
      ?options:EventLoopMonitorOptions.t -> unit -> EventLoopDelayMonitor.t)
      =
      fun ?options:(x107 : EventLoopMonitorOptions.t option) ->
        fun () ->
          EventLoopDelayMonitor.t_of_js
            (let x110 = Import.perf_hooks in
             Ojs.call (Ojs.get_prop_ascii x110 "monitorEventLoopDelay")
               "apply"
               [|x110;((let x108 =
                          Ojs.new_obj (Ojs.get_prop_ascii Ojs.global "Array")
                            [||] in
                        (match x107 with
                         | Some x109 ->
                             ignore
                               (Ojs.call x108 "push"
                                  [|(EventLoopMonitorOptions.t_to_js x109)|])
                         | None -> ());
                        x108))|])
  end
